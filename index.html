<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Contador Público - Semestres</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <h1>Malla Contador Público (FCEA) - Por Semestres</h1>

  <div class="grid">
    <!-- Semestre 1 -->
    <div class="semester">
      <h2>Semestre 1</h2>
      <div class="subject no_cursada" data-id="conceptos-contables" data-area="Contabilidad e Impuestos" data-creditos="10" data-prereq="">Conceptos contables</div>
      <div class="subject no_cursada" data-id="administracion-gestion-organizaciones-1" data-area="Administracion" data-creditos="10" data-prereq="">Administración y Gestión de las Organizaciones 1</div>
      <div class="subject no_cursada" data-id="introduccion-microeconomia" data-area="Economia" data-creditos="10" data-prereq="">Introducción a la Microeconomía</div>
      <div class="subject no_cursada" data-id="calculo-1a" data-area="Metodos Cuantitativos" data-creditos="5" data-prereq="">Cálculo 1A</div>
      <div class="subject no_habilitada" data-id="calculo-1b" data-area="Metodos Cuantitativos" data-creditos="5" data-prereq="calculo-1a">Cálculo 1B</div>
    </div>

    <!-- Semestre 2 -->
    <div class="semester">
      <h2>Semestre 2</h2>
      <div class="subject no_habilitada" data-id="contabilidad-general-1" data-area="Contabilidad e Impuestos" data-creditos="10" data-prereq="conceptos-contables">Contabilidad General 1</div>
      <div class="subject no_cursada" data-id="derecho-civil" data-area="Juridica" data-creditos="10" data-prereq="">Derecho Civil</div>
      <div class="subject no_cursada" data-id="economia-descriptiva" data-area="Economia" data-creditos="10" data-prereq="">Economía Descriptiva</div>
    </div>

    <!-- Semestre 3 -->
    <div class="semester">
      <h2>Semestre 3</h2>
      <div class="subject no_habilitada" data-id="introduccion-estadistica" data-area="Metodos Cuantitativos" data-creditos="10" data-prereq="calculo-1b">Introducción a la Estadística</div>
      <div class="subject no_habilitada" data-id="contabilidad-general-2" data-area="Contabilidad e Impuestos" data-creditos="10" data-prereq="contabilidad-general-1">Contabilidad General 2</div>
      <div class="subject no_habilitada" data-id="derecho-comercial" data-area="Juridica" data-creditos="10" data-prereq="derecho-civil">Derecho Comercial</div>
      <div class="subject no_habilitada" data-id="procesos-sistemas-informacion" data-area="Administracion" data-creditos="10" data-prereq="administracion-gestion-organizaciones-1">Procesos y Sistemas de Información</div>
    </div>

    <!-- Semestre 4 -->
    <div class="semester">
      <h2>Semestre 4</h2>
      <div class="subject no_habilitada" data-id="contabilidad-general-3" data-area="Contabilidad e Impuestos" data-creditos="10" data-prereq="contabilidad-general-2">Contabilidad General 3</div>
      <div class="subject no_habilitada" data-id="matematicas-financiera" data-area="Metodos Cuantitativos" data-creditos="10" data-prereq="introduccion-estadistica">Matemática Financiera</div>
      <div class="subject no_habilitada" data-id="legislacion-laboral-seguridad-social" data-area="Contabilidad e Impuestos" data-creditos="10" data-prereq="conceptos-contables,derecho-civil">Legislación Laboral y Seguridad Social</div>
      <div class="subject no_habilitada" data-id="derecho-societario" data-area="Juridica" data-creditos="10" data-prereq="derecho-civil">Derecho Societario</div>
    </div>

    <!-- Semestre 5 -->
    <div class="semester">
      <h2>Semestre 5</h2>
      <div class="subject no_habilitada" data-id="modelos-sistemas-costos" data-area="Contabilidad e Impuestos" data-creditos="10" data-prereq="contabilidad-general-3">Modelos y Sistemas de Costos</div>
      <div class="subject no_habilitada" data-id="derecho-tributario" data-area="Juridica" data-creditos="10" data-creditos-requeridos-area="Juridica" data-creditos-requeridos-area-cantidad="10" data-prereq="">Derecho Tributario</div>
      <div class="subject no_habilitada" data-id="etica-ejercicio-profesional" data-area="Actividades Integradoras" data-creditos="5" data-prereq="contabilidad-general-2,derecho-comercial">Ética y Ejercicio Profesional</div>
    </div>

    <!-- Semestre 6 -->
    <div class="semester">
      <h2>Semestre 6</h2>
      <div class="subject no_habilitada" data-id="contabilidad-superior-1" data-area="Contabilidad e Impuestos" data-creditos="10" data-creditos-requeridos-area="Contabilidad e Impuestos" data-creditos-requeridos-area-cantidad="50" data-prereq="">Contabilidad Superior 1</div>
      <div class="subject no_habilitada" data-id="control-interno" data-area="Contabilidad e Impuestos" data-creditos="10" data-creditos-requeridos-area="Contabilidad e Impuestos" data-creditos-requeridos-area-cantidad="40" data-prereq="procesos-sistemas-informacion">Control Interno</div>
      <div class="subject no_habilitada" data-id="contabilidad-gerencial" data-area="Contabilidad e Impuestos" data-creditos="10" data-creditos-requeridos-total="160" data-prereq="modelos-sistemas-costos,matematicas-financiera">Contabilidad Gerencial</div>
      <div class="subject no_habilitada" data-id="tributaria-1" data-area="Contabilidad e Impuestos" data-creditos="10" data-prereq="contabilidad-general-3,derecho-tributario">Tributaria 1</div>
    </div>

    <!-- Semestre 7 -->
    <div class="semester">
      <h2>Semestre 7</h2>
      <div class="subject no_habilitada" data-id="auditoria-1" data-area="Contabilidad e Impuestos" data-creditos="10" data-creditos-requeridos-total="160" data-prereq="derecho-societario,legislacion-laboral-seguridad-social,control-interno,contabilidad-superior-1">Auditoría 1</div>
      <div class="subject no_habilitada" data-id="tributaria-2" data-area="Contabilidad e Impuestos" data-creditos="10" data-prereq="tributaria-1">Tributaria 2</div>
      <div class="subject no_habilitada" data-id="finanzas-corporativas" data-area="Administracion" data-creditos="10" data-prereq="administracion-gestion-organizaciones-1,matematicas-financiera" data-creditos-requeridos-area="Contabilidad e Impuestos" data-creditos-requeridos-area-cantidad="40" data-creditos-requeridos-area-economia="Economia" data-creditos-requeridos-area-economia-cantidad="30" data-creditos-requeridos-total="180">Finanzas Corporativas</div>
    </div>

    <!-- Semestre 8 -->
    <div class="semester">
      <h2>Semestre 8</h2>
      <div class="subject no_habilitada" data-id="informes-profesionales-contador-publico" data-area="Contabilidad e Impuestos" data-creditos="10" data-prereq="auditoria-1">Informes Profesionales de Contador Público</div>
      <div class="subject no_habilitada" data-id="practica-pericial-ambito-judicial" data-area="Actividades Integradoras" data-creditos="5" data-prereq="contabilidad-superior-1,derecho-comercial,derecho-societario,etica-ejercicio-profesional">Práctica Pericial en el Ámbito Judicial</div>
      <div class="subject no_habilitada" data-id="gestion-financiera-del-estado" data-area="Administracion" data-creditos="10" data-creditos-requeridos-area="Contabilidad e Impuestos" data-creditos-requeridos-area-cantidad="30" data-creditos-requeridos-area-administracion="Administracion" data-creditos-requeridos-area-administracion-cantidad="20" data-creditos-requeridos-area-juridica="Juridica" data-creditos-requeridos-area-juridica-cantidad="15" data-creditos-requeridos-total="180" data-prereq="">Gestión Financiera del Estado</div>
    </div>
  </div>

  <footer>
    <p>Actualizado por Melina - Julio 2025</p>
  </footer>

  <script>
    function parsePrereqs(prereqStr) {
      return prereqStr ? prereqStr.split(',').map(s => s.trim()).filter(s => s.length > 0) : [];
    }

    const subjects = Array.from(document.querySelectorAll('.subject'));
    let aprobadas = new Set();

    function calcularCreditosPorArea() {
      const creditosPorArea = {};
      aprobadas.forEach(id => {
        const mat = subjects.find(s => s.dataset.id === id);
        if (mat) {
          const area = mat.dataset.area;
          const creditos = parseInt(mat.dataset.creditos) || 0;
          creditosPorArea[area] = (creditosPorArea[area] || 0) + creditos;
        }
      });
      return creditosPorArea;
    }

    function calcularCreditosTotales() {
      let total = 0;
      aprobadas.forEach(id => {
        const mat = subjects.find(s => s.dataset.id === id);
        if (mat) {
          total += parseInt(mat.dataset.creditos) || 0;
        }
      });
      return total;
    }

    function estaHabilitada(mat, creditosPorArea, creditosTotales) {
      const prereqs = parsePrereqs(mat.dataset.prereq);
      for (const pre of prereqs) {
        if (!aprobadas.has(pre)) return false;
      }

      if (mat.dataset.creditosRequeridosArea) {
        const areaReq = mat.dataset.creditosRequeridosArea;
        const cantReq = parseInt(mat.dataset.creditosRequeridosAreaCantidad || '0');
        if (!creditosPorArea[areaReq] || creditosPorArea[areaReq] < cantReq) return false;
      }

      if (mat.dataset.creditosRequeridosTotal) {
        const minTotal = parseInt(mat.dataset.creditosRequeridosTotal);
        if (creditosTotales < minTotal) return false;
      }

      for (const key of Object.keys(mat.dataset)) {
        if (key.startsWith('creditosRequeridosArea') && key !== 'creditosRequeridosArea' && key !== 'creditosRequeridosAreaCantidad') {
          const areaName = key.replace('creditosRequeridosArea', '');
          const areaNameLower = areaName.charAt(0).toUpperCase() + areaName.slice(1).toLowerCase();
          const cant = parseInt(mat.dataset[key]);
          if ((creditosPorArea[areaNameLower] || 0) < cant) return false;
        }
      }

      return true;
    }

    function actualizarEstado() {
      const creditosPorArea = calcularCreditosPorArea();
      const creditosTotales = calcularCreditosTotales();

      subjects.forEach(mat => {
        const id = mat.dataset.id;
        if (aprobadas.has(id)) {
          mat.classList.add('aprobado');
          mat.classList.remove('no_cursada', 'no_habilitada');
        } else {
          if (estaHabilitada(mat, creditosPorArea, creditosTotales)) {
            mat.classList.add('no_cursada');
            mat.classList.remove('no_habilitada', 'aprobado');
          } else {
            mat.classList.add('no_habilitada');
            mat.classList.remove('no_cursada', 'aprobado');
          }
        }
      });
    }

    subjects.forEach(mat => {
      mat.addEventListener('click', () => {
        const id = mat.dataset.id;
        if (aprobadas.has(id)) {
          aprobadas.delete(id);
        } else {
          aprobadas.add(id);
        }
        guardarAprobadas();
        actualizarEstado();
      });
    });

    actualizarEstado();
  </script>
</body>
</html>
                                
